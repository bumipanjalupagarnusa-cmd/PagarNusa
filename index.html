<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Form Pendaftaran — Aplikasi</title>
    <style>
      #splash {
        background-color: #14213b; /* biru dongker */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        z-index: 9999;
        transition: opacity 0.5s ease;
      }
      /* Header utama */
      .main-header {
        background: linear-gradient(90deg, #0d3b66, #1f7a8c);
        color: white;
        padding: 10px 20px;
        position: sticky;
        top: 0;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }
      .header-container {
        display: flex;
        justify-content: space-between; /* Logo + teks kiri, nav kanan */
        align-items: center;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .brand .logo {
        width: 55px;
        height: 55px;
        object-fit: contain;
      }

      .brand-text {
        display: flex;
        flex-direction: column;
      }

      .brand-title {
        font-weight: 700;
        font-size: 17px;
        text-align: left;
      }

      .brand-subtitle {
        font-size: 13px;
        color: #c0c0c0;
        text-align: left;
      }
nav {
    width: 20%;                 /* nav lebar penuh */
    display: flex;               /* flexbox aktif */
    justify-content: flex-end;   /* dorong tombol ke kanan */
    
    gap: 10px;                   /* jarak antar tombol */
    padding: 0;                  /* hilangkan padding, biar tidak ada background kotak */
    background: none;            /* hilangkan background */
    box-shadow: none;            /* hilangkan efek kotak/garis */
}

nav button {
    background-color: transparent; /* transparan, tidak ada kotak */
    border: none;
    color: #ffffff;               /* warna teks biru */
    font-weight: bold;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}

nav button:hover {
    background-color: #1ab8c0;    /* efek hover agar terlihat klik-able */
    color: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}


      #formCard {
        display: flex;
        flex-direction: column;
        align-items: center; /* kolom di tengah */
        gap: 20px; /* jarak antar kolom */
        margin: 0 auto;
      }

      body {
        font-family: Inter, Arial, sans-serif;
        background: #f6f8fb;
        margin: 0;
        padding: 20px;
      }
      .card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        padding: 25px 30px;
        max-width: 450px; /* Lebar pas di tengah */
        margin: 40px auto; /* Tengah secara horizontal */
        text-align: left;
      }
      form#regForm input,
      form#regForm select,
      form#regForm textarea {
        max-width: 100%; /* jangan melebihi kontainer */
        width: 100%; /* penuh tapi sesuai max-width */
        box-sizing: border-box; /* termasuk padding & border */
        margin: 0 auto; /* center jika ada space */
      }
      header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        box-shadow: none; /* hilangkan bayangan */
      }

      .logo {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        /* background dihapus */
        color: #000; /* ganti sesuai warna logo yang diinginkan */
        font-weight: 700;
      }

      h1 {
        font-size: 32px; /* ukuran besar */
        font-weight: 900; /* sangat tebal */
        color: #000000; /* bisa diberi warna biru */
        margin: 20px 0;
      }

      .steps {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin: 20px 0;
        position: relative;
      }
      .step-line {
        height: 2px;
        width: 60px;
        background: #ccc;
      }
      .step {
        display: flex;
        align-items: center;
        gap: 5px;
        font-weight: 600;
        font-size: 14px;
        color: #000000;
        cursor: pointer;
      }
      .active {
        color: #007bff;
        font-weight: 700;
      }

      label {
        display: block;
        margin-top: 10px;
        font-weight: 600;
      }
      input,
      select,
      textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #cccccc; /* default abu */
        border-radius: 8px;
        font-family: "Calibri", sans-serif;
        transition: border-color 0.3s ease; /* animasi halus */
      }
      .hidden {
        display: none;
      }
      .actions {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
      }
      .btn-primary {
        background: #0b72ff;
        color: #fff;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
      }
      .btn-secondary {
        background: #e5eaf1;
        color: #000000;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
      }
      .institution-group {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        margin-top: 10px;
      }

      .custom-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        user-select: none;
      }

      .custom-checkbox input[type="checkbox"] {
        display: none; /* sembunyikan default checkbox */
      }

      .custom-checkbox span {
        position: relative;
        padding-left: 25px; /* ruang untuk kotak */
      }

      .custom-checkbox span::before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 18px;
        height: 18px;
        border: 2px solid #000000c0;
        border-radius: 4px;
        background: white;
      }

      .custom-checkbox input[type="checkbox"]:checked + span::after {
        content: "✔";
        position: absolute;
        left: 2px;
        top: 50%;
        transform: translateY(-50%);
        color: #007bff;
        font-size: 14px;
      }

      /* Untuk div form muncul/hilang */
      .institution-group {
        display: none;
        overflow: hidden;
        max-height: 0;
        transition: max-height 0.3s ease, opacity 0.3s ease;
        opacity: 0;
        margin-left: 20px;
        padding-left: 5px;
        border-left: 2px solid #28292a5f;
      }

      .institution-group.show {
        display: block;
        max-height: 500px;
        opacity: 1;
      }

      /* Atur font dan ukuran hanya untuk label di semua step */
      div[id^="step"] label {
        font-family: "Calibri", Arial, sans-serif;
        font-size: 12px;
        font-weight: 600;
        color: #222;
      }

      small {
        display: block;
        font-size: 12px;
        color: #666;
        margin-bottom: 10px;
      }

      input::placeholder,
      textarea::placeholder {
        font-style: italic;
        color: #888;
      }
    </style>
    <style>
      .error-msg {
        color: red;
        font-size: 12px;
        margin-top: 2px;
        display: none; /* awalnya disembunyikan */
      }

      input,
      select {
        font-family: Arial, sans-serif;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 6px;
      }

      input.error,
      select.error {
        border-color: red;
      }
      /* Style default untuk small */
      input + small,
      select + small,
      textarea + small {
        display: block;
        font-size: 10px;
        color: #929191c9; /* abu-abu */
        margin-top: 3px;
        font-family: "Calibri", sans-serif;
        font-weight: bold; /* ditambahkan bold */
      }

      /* Style saat input error */
      input.error + small,
      select.error + small,
      textarea.error + small {
        color: red; /* merah */
        font-weight: bold;
      }
      .loading-text {
        color: white;
        font-size: 18px;
        font-weight: 500;
        font-family: Arial, sans-serif;
      }

      .dots::after {
        content: "";
        display: inline-block;
        width: 1em;
        text-align: left;
        animation: dots 1s steps(3, end) infinite;
      }

      @keyframes dots {
        0%,
        20% {
          content: "";
        }
        40% {
          content: ".";
        }
        60% {
          content: "..";
        }
        80%,
        100% {
          content: "...";
        }
      }
      /* Fokus input, select, textarea tetap biru */
      input:focus,
      select:focus,
      textarea:focus {
        border-color: #007bff;
        outline: none;
        box-shadow: 0 0 3px #007bff50;
      }

      /* Fokus radio hilangkan glow biru */
      .radio-row input[type="radio"]:focus {
        outline: none;
        box-shadow: none;
        border-color: #007bff;
      }
    </style>
    <style>
      .steps {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        margin: 15px 0;
      }

      .step {
        display: flex;
        align-items: center;
        gap: 5px;
        font-weight: 600;
        font-size: 12px;
        color: #000;
        cursor: pointer;
      }

      .step-circle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        background-color: #ccc; /* default abu-abu */
        color: white;
        border-radius: 50%;
        font-size: 14px;
        font-weight: bold;
        transition: background 0.3s;
      }

      .step.active .step-circle {
        background-color: #007bff; /* biru saat aktif */
      }

      .step-line {
        width: 25px; /* garis pendek */
        height: 2px;
        background: #ccc; /* default abu-abu */
        transition: background 0.3s;
      }

      .step.active ~ .step .step-line {
        background: #ccc;
      }

      /* garis antar langkah berubah biru jika langkah sebelumnya aktif */
      .step.active + .step-line {
        background: #007bff;
      }
      .radio-question {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 5px; /* jarak antar baris */
        margin: 5px;
        max-width: 420px;
        padding: 0px 0;
      }

      .radio-question .question-text {
        font-size: 12px;
        font-weight: 800; /* tanpa px */
        margin-bottom: 1px;
        color: #000000;
      }

      /* Baris opsi: teks kiri, tombol kanan */
      .radio-option {
        display: flex;
        align-items: center; /* sejajar atas-bawah */
        gap: 8px; /* jarak antara tombol dan teks */
        font-size: 12px;
        color: #333;
        padding: 2px 0;
        width: 10%;
        white-space: nowrap; /* cegah teks turun ke bawah */
      }

      .radio-option input[type="radio"] {
        width: 16px;
        height: 16px;
        cursor: pointer;
        accent-color: #2563eb;
        margin: 0; /* pastikan tanpa margin ekstra */
        margin-left: 0; /* pastikan rata kiri */
        flex-shrink: 0; /* supaya tombol tidak terdorong */
      }

      /* Tombol radio */
      .radio-option input[type="radio"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
        margin-left: 10px;
        accent-color: #2563eb; /* warna biru untuk radio aktif */
        outline: none; /* hilangkan garis biru default */
      }

      .radio-option input[type="radio"]:focus,
      .radio-option input[type="radio"]:focus-visible {
        outline: none !important;
        box-shadow: none !important;
      }


       /* --- HOME STYLE --- */
      .home-logo {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px; /* jarak antara logo dan judul */
        background: none; /* pastikan tidak ada kotak putih */
        padding: 0; /* hapus padding agar transparan */
      }

      .home-logo img {
        width: 120px; /* ukuran logo */
        height: 120px;
        object-fit: contain;
        background: none; /* tetap transparan */
        border-radius: 0; /* jangan melengkung */
        box-shadow: none; /* hilangkan shadow jika ingin murni transparan */
      }

      .registration-flow {
        max-width: 1000px;
        margin: 40px auto;
        font-family: "Poppins", sans-serif;
      }

      .flow-slider {
        display: flex;
        overflow-x: auto;
        gap: 12px;
        padding: 10px 5px;
        scroll-behavior: smooth;
      }

      .flow-slider::-webkit-scrollbar {
        height: 6px;
      }

      .flow-slider::-webkit-scrollbar-thumb {
        background-color: #1a9cb0;
        border-radius: 3px;
      }

      .flow-step {
        min-width: 140px; /* lebih kecil */
        flex: 0 0 auto;
        background: linear-gradient(
          135deg,
          #25d6e0,
          #1a9cb0
        ); /* gradasi biru */
        color: white;
        padding: 12px 10px;
        border-radius: 10px;
        text-align: center;
        font-weight: 600;
        font-size: 0.9rem;
        position: relative;
        opacity: 0;
        transform: translateY(10px);
        animation: fadeInUp 0.6s ease forwards;
      }

      .flow-step:nth-child(1) {
        animation-delay: 0s;
      }
      .flow-step:nth-child(2) {
        animation-delay: 0.1s;
      }
      .flow-step:nth-child(3) {
        animation-delay: 0.2s;
      }
      .flow-step:nth-child(4) {
        animation-delay: 0.3s;
      }
      .flow-step:nth-child(5) {
        animation-delay: 0.4s;
      }

      .step-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin: 0 auto 6px auto;
        font-size: 0.9rem;
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(10px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .gallery-slider {
        display: flex;
        justify-content: center; /* center items */
        align-items: center;
        overflow-x: auto;
        gap: 15px;
        padding: 15px;
        scroll-behavior: smooth;
      }

      .gallery-slider::-webkit-scrollbar {
        height: 6px;
      }

      .gallery-slider::-webkit-scrollbar-thumb {
        background-color: #143b27;
        border-radius: 3px;
      }

      .gallery-item {
        min-width: 180px; /* ukuran kecil supaya enak dilihat */
        flex: 0 0 auto;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        background-color: #fff;
      }

      .gallery-item img {
        width: 100%;
        height: 120px;
        object-fit: cover;
      }

      .gallery-item .caption {
        text-align: center;
        padding: 6px;
        font-size: 12px;
        background-color: #ffffffcc;
      }

      .caption {
        margin-top: 8px;
        text-align: center;
        font-size: 14px;
        color: #555;
      }



      .home-ads {
        background: #ffffffa8;
        border-radius: 10px;
        padding: 20px;
        margin-top: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }
      .home-ads-modern {
        max-width: 900px;
        margin: 40px auto;
        font-family: "Poppins", sans-serif;
        color: #222;
        padding: 0 15px;
      }
      .contact-footer {
  background-color: #1a9cb0; /* warna tema */
  color: white;
  padding: 15px 0; /* lebih tipis */
  text-align: center;
  border-top: 2px solid #0d3b66; /* garis pemisah tipis */
  font-family: Arial, sans-serif;
  font-size: 14px; /* font lebih kecil */
}

.contact-footer a {
  color: white;
  text-decoration: none;
  margin: 0 5px;
}

.contact-footer a:hover {
  text-decoration: underline;
}

    </style>
  </head>
  <body>
    <!-- Splash screen -->
    <div id="splash">
      <img
        src="logo1.png"
        alt="Logo Pagar Nusa"
        class="logo"
        style="width: 120px; height: 120px; margin-bottom: 15px"
      />
      <h1 class="loading-text">Loading<span class="dots"></span></h1>
    </div>
    <!-- Header utama di atas -->
    <header class="main-header">
      <div class="header-container">
        <div class="brand">
          <img src="logo1.png" alt="Logo Pagar Nusa" class="logo" />
          <div class="brand-text">
            <div class="brand-title">
              Pagar Nusa — Aplikasi Pembuatan KTA (Kartu Tanda Anggota)
            </div>
            <div class="brand-subtitle">Pendaftaran & Verifikasi Anggota</div>
          </div>
        </div>
    </header>


     <!-- ================= HOME ================= -->
    <section id="home" class="active">
      <!-- Logo Pagar Nusa -->
      <div class="home-logo">
        <img src="logo1.png" alt="Logo Pagar Nusa" />
      </div>
      <h1 style="text-align: center">
        Selamat Datang di Aplikasi KTA Pagar Nusa BUMI PANJALU
      </h1>
      <p style="text-align: center">
        Dengan aplikasi ini, kamu dapat dengan mudah melakukan
        <b>pendaftaran, pengelolaan, dan verifikasi anggota resmi</b> Pagar Nusa
        secara digital.
      </p>

      <div class="registration-flow">
        <h2 style="text-align: center; color: #0d3b66">
          Tata Cara Pengisian Pendaftaran
        </h2>

        <div class="flow-slider">
          <div class="flow-step">
            <div class="step-icon">1</div>
            Buka halaman <b>Pendaftaran</b>
          </div>
          <div class="flow-step">
            <div class="step-icon">2</div>
            Isi data pribadi lengkap
          </div>
          <div class="flow-step">
            <div class="step-icon">3</div>
            Unggah foto & dokumen
          </div>
          <div class="flow-step">
            <div class="step-icon">4</div>
            Periksa data & klik <b>Submit</b>
          </div>
          <div class="flow-step">
            <div class="step-icon">5</div>
            Tunggu verifikasi admin
          </div>
        </div>
      </div>

    <script>
      function showNotif(message, type = "info", duration = 3000) {
        const notifContainer = document.getElementById("notifContainer");
        const notif = document.createElement("div");
        notif.textContent = message;
        notif.style.padding = "10px 20px";
        notif.style.marginTop = "10px";
        notif.style.borderRadius = "8px";
        notif.style.color = "#fff";
        notif.style.minWidth = "200px";
        notif.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
        notif.style.opacity = "0.95";
        notif.style.transition = "all 0.3s ease";

        switch (type) {
          case "success":
            notif.style.background = "#28a745";
            break;
          case "warning":
            notif.style.background = "#ffc107";
            notif.style.color = "#000";
            break;
          case "error":
            notif.style.background = "#dc3545";
            break;
          default:
            notif.style.background = "#007bff";
            break;
        }

        notifContainer.appendChild(notif);

        setTimeout(() => {
          notif.style.opacity = "0";
          setTimeout(() => notif.remove(), 300);
        }, duration);
      }
    </script>
    <div id="formCard"></div>
    <div class="card">
      <header>
        <!-- Card/form -->
        <div class="card">
          <header class="form-header">
            <div class="logo">
              <img src="logo1.png" alt="Logo Pagar Nusa" style="height: 60px" />
            </div>
            <h1>Form Pendaftaran</h1>
          </header>
          <!-- form content di sini -->
        </div>
      </header>



      
      <div class="steps">
        <div id="nav1" class="step active" onclick="goToStep(1)">
          <span class="step-circle">1</span> Langkah 1
        </div>
        <div class="step-line" id="line1"></div>
        <div id="nav2" class="step" onclick="goToStep(2)">
          <span class="step-circle">2</span> Langkah 2
        </div>
        <div class="step-line" id="line2"></div>
        <div id="nav3" class="step" onclick="goToStep(3)">
          <span class="step-circle">3</span> Langkah 3
        </div>
        <div class="step-line" id="line3"></div>
        <div id="nav4" class="step" onclick="goToStep(4)">
          <span class="step-circle">4</span> Langkah 4
        </div>
      </div>

      <form id="regForm" onsubmit="event.preventDefault(); submitForm()">
        <div id="step1">
          <label>NIK*</label>
          <input type="text" id="nik" required />
          <small>NIK sesuai KTP (Hanya angka & 16 digit)</small>

          <label>Email*</label>
          <input type="email" id="email" required />

          <label>Nama Lengkap*</label>
          <input type="text" id="nama" required />
          <small>Nama tanpa gelar dan karakter</small>

          <label>Tempat Lahir</label>
          <input type="text" id="tempat_lahir" required />
          <small>tempat Lahir</small>

          <label>Tanggal Lahir</label>
          <input type="date" id="tanggal_lahir" required />
          <small>Format: Bulan/Tanggal/Tahun</small>

          <label>Jenis Kelamin</label>
          <select id="jk" required>
            <option value="">Pilih...</option>
            <option value="Laki-laki">Laki-laki</option>
            <option value="P">perempuan</option>
          </select>

          <label>Nomor HP</label>
          <input type="text" id="hp" required />
          <small>Contoh: 081xxxXXXxxx</small>

          <!-- Tombol Next harus di dalam step1 -->
          <div class="actions">
            <div></div>
            <button type="button" class="btn-primary" onclick="nextStep(1)">
              Selanjutnya →
            </button>
          </div>
        </div>
        <!-- tutup step1 di sini -->

        <div id="step2" class="hidden">
          <label>Nama Pelatih</label>
          <input type="text" id="nama_pelatih" />

          <label>Lokasi Latihan</label>
          <input type="text" id="lokasi_latihan" />

          <label>Provinsi</label>
          <select id="provinsi" onchange="populateKab()">
            <option value="">-- Pilih Provinsi --</option>
            <small>pilih provinsi</small>
          </select>

          <label>Kabupaten / Kota</label>
          <select id="kabupaten" onchange="populateKec()">
            <option value="">-- Pilih Kabupaten/Kota --</option>
            <small>kab.sesuai lokasi latihan</small>
          </select>

          <label>Kecamatan</label>
          <select id="kecamatan" onchange="populateDesa()">
            <option value="">-- Pilih Kecamatan --</option>
            <small>Kec.sesuai lokasi latihan</small>
          </select>

          <label>kelurahan</label>
          <select id="desa">
            <option value="">-- Pilih Desa --</option>
            <small>KeL/Desa.sesuai lokasi latihan</small>
          </select>
          <div class="radio-question">
            <p class="question-text">Apakah Anda Pengurus?</p>

            <label class="radio-option">
              <input type="radio" name="pengurus" value="ya" />
              <span>Ya, Saya Pengurus</span>
            </label>

            <label class="radio-option">
              <input type="radio" name="pengurus" value="tidak" />
              <span>Bukan Pengurus</span>
            </label>
          </div>

          <div class="actions">
            <button type="button" class="btn-secondary" onclick="goToStep(1)">
              ← Kembali
            </button>
            <button type="button" class="btn-primary" onclick="nextStep(2)">
              Selanjutnya →
            </button>
          </div>
        </div>

        <div id="step3" class="hidden">
          <label class="custom-checkbox">
            <input type="checkbox" id="chk_padepokan" />
            <span>Padepokan</span>
          </label>
          <div id="padepokanFields" class="institution-group hidden">
            <label>Nama Perguruan</label><input type="text" />
            <label>Nama Pengasuh perguruan / padepokan</label><input type="text" />
            <label>Telepon perguruan / padepokan</label><input type="text" /> <label>Alamat</label
            ><input type="text" />
          </div>

          <label class="custom-checkbox">
            <input type="checkbox" id="chk_pesantren" />
            <span>Pesantren</span>
          </label>
          <div id="pesantrenFields" class="institution-group hidden">
            <label>Nama ponpes</label><input type="text" />
            <label>Pengasuh ponpes</label><input type="text" />
            <label>Telepon ponpes</label><input type="text" /> <label>Alamat</label
            ><input type="text" />
          </div>

          <label class="custom-checkbox">
            <input type="checkbox" id="chk_sekolah" />
            <span>Sekolah</span>
          </label>
          <div id="sekolahFields" class="institution-group hidden">
            <label>Nama Sekolah</label><input type="text" />
            <label>Alamat Sekolah</label><input type="text" />
            <label>Telepon Sekolah</label><input type="text" /> <label>Alamat</label
            ><input type="text" />
          </div>

          <div class="actions">
            <button type="button" class="btn-secondary" onclick="goToStep(2)">
              ← Kembali
            </button>
            <button type="button" class="btn-primary" onclick="nextStep(3)">
              Selanjutnya →
            </button>
          </div>
        </div>

        <div id="step4" class="hidden">
          <label>Upload Foto</label>
          <input type="file" id="foto" accept="image/*" />
          <small
            >Upload Foto (max 10MB). Ketentuan: background merah, bersakral
            lengkap, perempuan wajib hijab, ukuran 3x4 max 5mb</small
          >
          <div id="previewFoto" style="margin: 10px 0"></div>

          <label>Upload KTP/KK</label>
          <input type="file" id="ktp" accept="image/*" />
          <div id="previewKTP" style="margin: 10px 0"></div>

          <div class="actions">
            <button type="button" class="btn-secondary" onclick="goToStep(3)">
              ← Kembali
            </button>
            <button type="submit" class="btn-primary">Kirim</button>
          </div>
        </div>
        <script>
          window.addEventListener("DOMContentLoaded", () => {
            // Tampilkan splash 2 detik
            setTimeout(() => {
              const splash = document.getElementById("splash");
              const formCard = document.getElementById("formCard");
              splash.style.opacity = "0";
              setTimeout(() => {
                splash.style.display = "none";
                formCard.style.opacity = "1";
              }, 500); // fade out 0.5s
            }, 1000); // durasi splash 2 detik
          });
        </script>
      </form>
    </div>
    <script>
  // Preview Foto
  document.getElementById("foto").addEventListener("change", function (event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function (e) {
      document.getElementById("previewFoto").innerHTML = `
        <img src="${e.target.result}" style="max-width:150px; border-radius:6px;">
      `;
    };
    reader.readAsDataURL(file);
  });

  // Preview KTP/KK
  document.getElementById("ktp").addEventListener("change", function (event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function (e) {
      document.getElementById("previewKTP").innerHTML = `
        <img src="${e.target.result}" style="max-width:150px; border-radius:6px;">
      `;
    };
    reader.readAsDataURL(file);
  });
</script>

    <script>
      function setupValidation() {
        const steps = document.querySelectorAll('[id^="step"]');

        steps.forEach((step) => {
          const inputs = step.querySelectorAll(
            "input[required], select[required], textarea[required]"
          );

          inputs.forEach((input) => {
            // simpan placeholder asli
            input.dataset.originalPlaceholder = input.placeholder || "";

            input.addEventListener("blur", () => {
              if (!input.value || input.value === "") {
                input.classList.add("error");
                if (input.tagName !== "SELECT") {
                  input.placeholder = "";
                } else {
                  const firstOption = input.querySelector('option[value=""]');
                  if (firstOption) firstOption.textContent = "";
                }
              }
            });

            input.addEventListener("input", () => {
              input.classList.remove("error");
              input.placeholder = input.dataset.originalPlaceholder;
            });

            input.addEventListener("change", () => {
              input.classList.remove("error");
              if (input.tagName === "SELECT") {
                const firstOption = input.querySelector('option[value=""]');
                if (firstOption)
                  firstOption.textContent =
                    firstOption.dataset.originalPlaceholder || "";
              }
            });

            // simpan placeholder asli untuk select
            if (input.tagName === "SELECT") {
              const firstOption = input.querySelector('option[value=""]');
              if (firstOption)
                firstOption.dataset.originalPlaceholder =
                  firstOption.textContent;
            }
          });
        });
      }

      // Bersihkan error saat pindah step
      function clearStepErrors(stepId) {
        const step = document.getElementById(stepId);
        if (!step) return;
        const inputs = step.querySelectorAll("input, select, textarea");
        inputs.forEach((input) => {
          input.classList.remove("error");
          if (input.tagName !== "SELECT")
            input.placeholder = input.dataset.originalPlaceholder || "";
          else {
            const firstOption = input.querySelector('option[value=""]');
            if (firstOption)
              firstOption.textContent =
                firstOption.dataset.originalPlaceholder || "";
          }
        });
      }

      // Modifikasi goToStep untuk bersihkan error step sebelumnya
      function goToStep(n) {
        for (let i = 1; i <= 4; i++) {
          const stepElem = document.getElementById("step" + i);
          if (stepElem) {
            if (i === n) stepElem.classList.remove("hidden");
            else {
              stepElem.classList.add("hidden");
              clearStepErrors("step" + i);
            }
          }
          const navElem = document.getElementById("nav" + i);
          if (navElem) navElem.classList.toggle("active", i === n);
        }
      }

      window.addEventListener("DOMContentLoaded", setupValidation);
    </script>
    <script>
      const fotoInput = document.getElementById("foto");
      const ktpInput = document.getElementById("ktp");
      const previewFoto = document.getElementById("previewFoto");
      const previewKTP = document.getElementById("previewKTP");

      fotoInput.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            previewFoto.innerHTML = `<img src="${e.target.result}" alt="Foto" style="max-width:150px; border-radius:8px;">`;
          };
          reader.readAsDataURL(file);
        } else {
          previewFoto.innerHTML = "";
        }
      });

      ktpInput.addEventListener("change", function () {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            previewKTP.innerHTML = `<img src="${e.target.result}" alt="KTP/KK" style="max-width:150px; border-radius:8px;">`;
          };
          reader.readAsDataURL(file);
        } else {
          previewKTP.innerHTML = "";
        }
      });
    </script>

    <script>
      function $(id) {
        return document.getElementById(id);
      }

      function goToStep(n) {
        for (let i = 1; i <= 4; i++) {
          const stepElem = $("step" + i);
          if (stepElem) stepElem.classList.toggle("hidden", i !== n);
          const navElem = $("nav" + i);
          if (navElem) navElem.classList.toggle("active", i === n);
        }
      }

      function nextStep(n) {
        const stepElem = $("step" + n);
        if (!stepElem) return;

        // Cari semua input wajib di step
        const inputs = stepElem.querySelectorAll(
          "input[required], select[required], input[type=radio], input[type=file]"
        );

        for (let inp of inputs) {
          if (inp.type === "radio") {
            const radios = document.getElementsByName(inp.name);
            if (radios.length && !Array.from(radios).some((r) => r.checked)) {
              alert("Harap pilih salah satu opsi!");
              radios[0].focus();
              return;
            }
          } else if (inp.type === "file") {
            // Step 4: wajib diisi
            if (n === 4 && (!inp.files || inp.files.length === 0)) {
              alert("Harap unggah file yang diminta di langkah 4!");
              inp.focus();
              return;
            }
          } else if (!inp.value.trim()) {
            alert("Harap isi semua kolom wajib!");
            inp.focus();
            return;
          }
        }

        if (n < 4) goToStep(n + 1); // Jangan lanjut kalau step terakhir
      }

      // ===============================
      // DATA WILAYAH
      // ===============================
      const wilayah = {
        "Jawa Timur": {
          "Kabupaten Kediri": {
               Pare: [
            "bendo",
            "darungan",
            "gedangsewu",
            "pelem",
            "sambirejo",
            "sidorejo",
            "sumberbendo",
            "tertek",
            "tulungrejo",
          ],
          Plosoklaten: [
            "brenggolo",
            "donganti",
            "jarak",
            "kawedusan",
            "kayunan",
            "klanderan",
            "panjer",
            "plosokidul",
            "plosolor",
            "pranggang",
            "punjul",
            "sepawon",
            "sumberagung",
            "wonorejo trisulo",
          ],
          Kandat: ["cendono", "ringinsari", "tegalan", "ngletih", "sumberejo"],
          KayenKidul: [
            "baye",
            "pandangan",
            "nanggungan",
            "semambung",
            "kayen kidul",
            "mukuh",
          ],
          Ngasem: [
            "tugurejo",
            "sumberejo",
            "gogorante",
            "doko",
            "ngasem",
            "sukorejo",
            "butuh",
            "tengger",
            "ngantru",
            "sambong",
            "dukohkidul",
          ],
          Badas: [
            "Badas",
            "canggu",
            "lamong",
            "bringin",
            "sekoto",
            "tunglur",
            "krecek",
            "blaru",
          ],
          Grogol: [
            "Grogol",
            "kalipang",
            "cerme",
            "wonosari",
            "sonorejo",
            "datengan",
            "sumberejo",
            "gamyok",
            "bakalan",
          ],
          Kandangan: [
            "kemiri",
            "klampisan",
            "karangtengah",
            "kasreman",
            "jerukwangi",
            "jerukgulung",
            "jlumbang",
            "bukur",
            "kandangan",
            "banaran",
            "mlancu",
            "medowo",
          ],
          Mojoroto: [
            "Mojoroto",
            "bandar lor",
            "bandar kidul",
            "banjar mlati",
            "pojok",
            "sukorame",
            "bujel",
            "gayam",
            "mrican",
            "dermo",
            "ngampel",
            "mojoroto",
            "campurejo",
            "lirboyo",
            "tamanan",
          ],
          Pesantren: [
            "Pesantren",
            "banaran",
            "bangsal",
            "betet",
            "bawang",
            "blabak",
            "burengan",
            "jamsaren",
            "ketami",
            "ngletih",
            "pakunden",
            "singonegaran",
            "tempurejo",
            "tinalan",
            "tosaren",
          ],
          Plemahan: [
            "Plemahan",
            "lengenharjo",
            "togowangi",
            "mujono",
            "bogo kidul",
            "kayen lor",
            "wonokerto",
            "ngino",
            "sebet",
            "sukoharjo",
            "mojo kerep",
            "bogo kidul",
            "sidomulyo",
            "banjar rejo",
            "payaman",
            "ringen rejo",
          ],
          Puncu: [
            "Puncu",
            "asmorobangun",
            "manggis",
            "gadungan",
            "sidpmulyo",
            "watu gede",
            "wonorejo",
            "sidokerto",
          ],
          Ringinrejo: [
            "Ringinrejo",
            "batuaji",
            "dawung",
            "deyeng",
            "nambakan",
            "purwodadi",
            "sambi",
            "selodono",
            "srikaton",
            "susuhbango",
            "jemekan",
          ],
          Semen: ["Semen", "bulu", "bobang", "titik", "kedak"],
          Tarokan: [
            "Tarokan",
            "blimbing",
            "bulusari",
            "cengkok",
            "jati",
            "kaliboto",
            "kalirong",
            "kedungsari",
            "kerep",
            "kerep",
            "sumberduren",
            "tarokan",
          ],
          Wates: [
            "duwet",
            "tawang",
            "segaran",
            "Tumpukgadungan",
            "pojok",
            "wonorejo",
            "wates",
            "jajar",
            "tunge",
            "tempurejo",
            "plaosan",
            "karanganyar",
            "sumberagung",
            "pagu",
            "joho",
            "silir",
            "janti",
            "sidomulyo",
          ],
          Ngancar: ["Ngancar", "sempu", "kunjang", "manggis", "sugihwaras"],
          Purwoasri: [
            "Purwoasri",
            "dayu",
            "dawuhan",
            "jantok",
            "kempleng",
            "muneng",
            "pandansari",
            "pesing",
            "sumberejo",
          ],
          Papar: [
            "babad",
            "klanderan",
            "kedungfong",
            "kedungrejo",
            "kwaron",
            "manggis",
            "mekikis",
            "minggiran",
            "ngampel",
            "panjaran",
            "papar",
            "pehkulon",
            "pehwetan",
            "purwotengah",
            "sendangrejo",
          ],
          },
          "Kabupaten Malang": {
            "Kecamatan Lawang": [
              "Desa Sidodadi",
              "Desa Sumberporong",
              "Desa Turirejo",
            ],
            "Kecamatan Kepanjen": [
              "Desa Talangagung",
              "Desa Kedungpedaringan",
              "Desa Panggungrejo",
            ],
          },
          "Kabupaten Blitar": {
            "Kecamatan Kanigoro": [
              "Desa Jatinom",
              "Desa Plosorejo",
              "Desa Gaprang",
            ],
            "Kecamatan Srengat": [
              "Desa Dandong",
              "Desa Kauman",
              "Desa Kuningan",
            ],
          },
          "Kota Kediri": {
            "Kecamatan Mojoroto": [
              "Kelurahan Mojoroto",
              "Kelurahan Campurejo",
              "Kelurahan Sukorame",
            ],
            "Kecamatan Kota": [
              "Kelurahan Dandangan",
              "Kelurahan Balowerti",
              "Kelurahan Jagalan",
            ],
            "Kecamatan Pesantren": [
              "Kelurahan Bangsal",
              "Kelurahan Tempurejo",
              "Kelurahan Burengan",
            ],
          },
          "Kabupaten Tulungagung": {
            "Kecamatan Ngunut": [
              "Desa Ngunut",
              "Desa Sumbergempol",
              "Desa Karangrejo",
            ],
            "Kecamatan Boyolangu": [
              "Desa Beji",
              "Desa Bolorejo",
              "Desa Ketanon",
            ],
          },
          "Kabupaten Jombang": {
            "Kecamatan Diwek": ["Desa Cukir", "Desa Gondek", "Desa Jatipelem"],
            "Kecamatan Mojowarno": [
              "Desa Mojojejer",
              "Desa Japanan",
              "Desa Selorejo",
            ],
          },
          "Kabupaten Nganjuk": {
            "Kecamatan Kertosono": [
              "Desa Banaran",
              "Desa Pandantoyo",
              "Desa Pelem",
            ],
            "Kecamatan Baron": [
              "Desa Baron",
              "Desa Kedungmlati",
              "Desa Sekarputih",
            ],
          },
          "Kabupaten Mojokerto": {
            "Kecamatan Dlanggu": [
              "Desa Randugenengan",
              "Desa Sumberkarang",
              "Desa Pohkecik",
            ],
            "Kecamatan Pacet": [
              "Desa Cempokolimo",
              "Desa Sajen",
              "Desa Claket",
            ],
          },
          "Kabupaten Sidoarjo": {
            "Kecamatan Tanggulangin": [
              "Desa Ketegan",
              "Desa Kedensari",
              "Desa Kludan",
            ],
            "Kecamatan Candi": ["Desa Gelam", "Desa Sugihwaras", "Desa Candi"],
          },
          "Kabupaten Pasuruan": {
            "Kecamatan Pandaan": [
              "Desa Petungasri",
              "Desa Durensewu",
              "Desa Sumbergedang",
            ],
            "Kecamatan Grati": [
              "Desa Ranu Klindungan",
              "Desa Kalipang",
              "Desa Plososari",
            ],
          },
          "Kabupaten Probolinggo": {
            "Kecamatan Leces": [
              "Desa Tigasan Wetan",
              "Desa Sumberkedawung",
              "Desa Warujinggo",
            ],
            "Kecamatan Sukapura": [
              "Desa Ngadisari",
              "Desa Wonokerto",
              "Desa Jetak",
            ],
          },
          "Kabupaten Banyuwangi": {
            "Kecamatan Rogojampi": [
              "Desa Gitik",
              "Desa Bubuk",
              "Desa Lemahbang Dewo",
            ],
            "Kecamatan Genteng": [
              "Desa Genteng Kulon",
              "Desa Genteng Wetan",
              "Desa Setail",
            ],
          },
          "Kabupaten Lamongan": {
            "Kecamatan Babat": [
              "Desa Kebalan Kulon",
              "Desa Moropelang",
              "Desa Plaosan",
            ],
            "Kecamatan Paciran": [
              "Desa Kranji",
              "Desa Weru",
              "Desa Banjarwati",
            ],
          },
        },
        "Jawa Tengah": {},
        "Jawa Barat": {},
        "DKI Jakarta": {},
        Banten: {},
        "Daerah Istimewa Yogyakarta": {},
        Bali: {},
        "Nusa Tenggara Barat": {},
        "Nusa Tenggara Timur": {},
        "Kalimantan Timur": {},
        "Kalimantan Selatan": {},
        "Kalimantan Tengah": {},
        "Kalimantan Barat": {},
        "Kalimantan Utara": {},
        "Sulawesi Selatan": {},
        "Sulawesi Utara": {},
        "Sulawesi Tengah": {},
        "Sulawesi Tenggara": {},
        Gorontalo: {},
        "Sulawesi Barat": {},
        Maluku: {},
        "Maluku Utara": {},
        Papua: {},
        "Papua Barat": {},
        "Papua Tengah": {},
        "Papua Pegunungan": {},
        "Papua Selatan": {},
        "Papua Barat Daya": {},
        Aceh: {},
        "Sumatera Utara": {},
        "Sumatera Barat": {},
        Riau: {},
        "Kepulauan Riau": {},
        Jambi: {},
        Bengkulu: {},
        "Sumatera Selatan": {},
        "Kepulauan Bangka Belitung": {},
        Lampung: {},
      };

      // ===== Fungsi dropdown =====
      function populateProv() {
        const provSelect = document.getElementById("provinsi");
        provSelect.innerHTML = "<option value=''>-- Pilih Provinsi --</option>";
        Object.keys(wilayah).forEach((prov) => {
          provSelect.innerHTML += `<option value="${prov}">${prov}</option>`;
        });
      }
      function populateKab() {
        const prov = document.getElementById("provinsi").value;
        const kabSelect = document.getElementById("kabupaten");
        const kecSelect = document.getElementById("kecamatan");
        const desaSelect = document.getElementById("desa");

        kabSelect.innerHTML =
          "<option value=''>-- Pilih Kabupaten/Kota --</option>";
        kecSelect.innerHTML = "<option value=''>-- Pilih Kecamatan --</option>";
        desaSelect.innerHTML = "<option value=''>-- Pilih Desa --</option>";

        if (prov && wilayah[prov]) {
          Object.keys(wilayah[prov]).forEach((kab) => {
            kabSelect.innerHTML += `<option value="${kab}">${kab}</option>`;
          });
        }
      }

      function populateKec() {
        const prov = document.getElementById("provinsi").value;
        const kab = document.getElementById("kabupaten").value;
        const kecSelect = document.getElementById("kecamatan");
        const desaSelect = document.getElementById("desa");

        kecSelect.innerHTML = "<option value=''>-- Pilih Kecamatan --</option>";
        desaSelect.innerHTML = "<option value=''>-- Pilih Desa --</option>";

        if (prov && kab && wilayah[prov][kab]) {
          Object.keys(wilayah[prov][kab]).forEach((kec) => {
            kecSelect.innerHTML += `<option value="${kec}">${kec}</option>`;
          });
        }
      }

      function populateDesa() {
        const prov = document.getElementById("provinsi").value;
        const kab = document.getElementById("kabupaten").value;
        const kec = document.getElementById("kecamatan").value;
        const desaSelect = document.getElementById("desa");

        desaSelect.innerHTML = "<option value=''>-- Pilih Desa --</option>";

        if (prov && kab && kec && wilayah[prov][kab][kec]) {
          wilayah[prov][kab][kec].forEach((desa) => {
            desaSelect.innerHTML += `<option value="${desa}">${desa}</option>`;
          });
        }
      }

      // ===== Submit =====
      function submitForm() {
        const prov = document.getElementById("provinsi").value;
        const kab = document.getElementById("kabupaten").value;
        const kec = document.getElementById("kecamatan").value;
        const desa = document.getElementById("desa").value;

        alert(
          `Data terpilih:\nProvinsi: ${prov}\nKab/Kota: ${kab}\nKecamatan: ${kec}\nDesa/Kel: ${desa}`
        );
      }

      // Panggil saat load
      window.addEventListener("DOMContentLoaded", () => {
        populateProv();
      });

      // Fungsi untuk toggle tampilan berdasarkan checkbox
      function toggleFields(checkboxId, fieldsId) {
        const checkbox = document.getElementById(checkboxId);
        const fields = document.getElementById(fieldsId);

        // set awal
        if (checkbox.checked) {
          fields.classList.add("show");
        } else {
          fields.classList.remove("show");
        }

        checkbox.addEventListener("change", () => {
          if (checkbox.checked) {
            fields.classList.add("show");
          } else {
            fields.classList.remove("show");
          }
        });
      }

      toggleFields("chk_padepokan", "padepokanFields");
      toggleFields("chk_pesantren", "pesantrenFields");
      toggleFields("chk_sekolah", "sekolahFields");
    </script>
    <script>
      const SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbzzcYhwLyKmzV9sqCSskzawbbNyIzX2iLoDsEFqxwJxNQvN53bURw5m1llHpe3dUrW5yA/exec";

      function fileToBase64(file) {
        return new Promise((resolve, reject) => {
          if (!file) return resolve("");
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result.split(",")[1]);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });
      }

      async function submitForm() {
        const data = {
          nik: document.getElementById("nik").value,
          email: document.getElementById("email").value,
          nama: document.getElementById("nama").value,
          tempat_lahir: document.getElementById("tempat_lahir").value,
          tanggal_lahir: document.getElementById("tanggal_lahir").value,
          jk: document.getElementById("jk").value,
          hp: document.getElementById("hp").value,
          nama_pelatih: document.getElementById("nama_pelatih").value,
          lokasi_latihan: document.getElementById("lokasi_latihan").value,
          provinsi: document.getElementById("provinsi").value,
          kabupaten: document.getElementById("kabupaten").value,
          kecamatan: document.getElementById("kecamatan").value,
          desa: document.getElementById("desa").value,
          foto: document.getElementById("foto").files[0],
          foto_ktp: document.getElementById("ktp").files[0],
        };

        function fileToBase64(file) {
          return new Promise((resolve, reject) => {
            if (!file) return resolve("");
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result.split(",")[1]);
            reader.onerror = reject;
            reader.readAsDataURL(file);
          });
        }

        try {
          const [fotoBase64, ktpBase64] = await Promise.all([
            fileToBase64(data.foto),
            fileToBase64(data.foto_ktp),
          ]);

          const formData = new FormData();
          formData.append("NIK", data.nik);
          formData.append("Email", data.email);
          formData.append("Nama", data.nama);
          formData.append("Tempat_Lahir", data.tempat_lahir);
          formData.append("Tanggal_Lahir", data.tanggal_lahir);
          formData.append("Jenis_Kelamin", data.jk);
          formData.append("HP", data.hp);
          formData.append("Nama_Pelatih", data.nama_pelatih);
          formData.append("Lokasi_Latihan", data.lokasi_latihan);
          formData.append("Provinsi", data.provinsi);
          formData.append("Kabupaten_Kota", data.kabupaten);
          formData.append("Kecamatan", data.kecamatan);
          formData.append("Desa", data.desa);
          formData.append("Foto", fotoBase64);
          formData.append("Foto_KTP", ktpBase64);

          const res = await fetch(SCRIPT_URL, {
            method: "POST",
            body: formData,
          });
          const resData = await res.json();

          if (resData.result === "success") {
            alert("✅ Data berhasil dikirim!");

            // Reset semua input
            const form = document.getElementById("regForm");
            form.reset();

            // Reset step ke 1
            goToStep(1);

            // Bersihkan preview
            document.getElementById("previewFoto").innerHTML = "";
            document.getElementById("previewKTP").innerHTML = "";

            // Bersihkan checkbox/radio
            document
              .querySelectorAll('input[type="checkbox"], input[type="radio"]')
              .forEach((i) => (i.checked = false));

            // Sembunyikan field tambahan
            ["padepokanFields", "pesantrenFields", "sekolahFields"].forEach(
              (id) => {
                const el = document.getElementById(id);
                if (el) el.classList.add("hidden");
              }
            );
          } else if (resData.result === "duplicate") {
            alert("⚠️ NIK sudah terdaftar!");
          } else {
            alert("⚠️ Terjadi kesalahan: " + JSON.stringify(resData));
          }
        } catch (err) {
          alert("❌ Gagal kirim: " + err.message);
        }
      }
    </script>
  </body>
  <footer class="contact-footer">
  Kontak Kami: 
  <a href="mailto:bumipanjalupagarnusa@gmail.com">bumipanjalupagarnusa@gmail.com</a> | 
  <a href="tel:081217035139">0812-1703-5139</a>
</footer>

</html>



